# å·¥ä½œè®°å½•

- å¢é‡ROI=ï¼ˆå®éªŒç»„GMV-å¯¹ç…§ç»„GMV/å¯¹ç…§ç»„è¦†ç›–äººæ•°\*å®éªŒç»„è¦†ç›–äººæ•°ï¼‰/ï¼ˆå®éªŒç»„è¡¥è´´-å¯¹ç…§ç»„è¡¥è´´/å¯¹ç…§ç»„è¦†ç›–äººæ•°\*å®éªŒç»„è¦†ç›–äººæ•°ï¼‰

- æ–°å®¢å¢é‡ROI=Î”æ‹‰æ–°é‡ï¼Î”æ€»æˆæœ¬

- æ™ºèƒ½è¡¥è´´ï¼šå·¥ä½œæ—¥æ•ˆæœå¥½ï¼Œå‘¨æœ«æ•ˆæœä¸å¥½ï¼Œæ¨¡å‹æœªåŠ å…¥weekdayç­‰æ ‡ç¤ºå·¥ä½œæ—¥çš„ç‰¹å¾ï¼Œæ€€ç–‘å·¥ä½œæ—¥æ•°æ®åˆ†å¸ƒä¸å‘¨æœ«ä¸åŒï¼ŒåŠ å…¥è¿™ç±»ç‰¹å¾åº”è¯¥èƒ½ä½¿å‘¨æœ«æ•ˆæœæå‡ã€‚

- wxåˆ†äº«ï¼š

  1. è¯è¡¨åŠ è½½å¯ç”±é€è¡Œè¯»å–ï¼Œæ”¹ä¸ºmmapï¼šå°†æ–‡ä»¶å˜ä¸ºbinaryæ–‡ä»¶ï¼Œå†åŠ è½½åˆ°å†…å­˜ï¼Œäº¿çº§è¡Œæ–‡ä»¶å‡ ç§’èƒ½åŠ è½½å®Œã€‚

- åˆ¸è¡¨ç”Ÿæˆsql:

  insert overwrite table gulfstream_ods.c_coupon_rel partition(year='2018',month='09',day='02')
  select
  â€‹    `id`,nvl(sqoop_replace(`userid`),''),nvl(sqoop_replace(`user_phone`),''),nvl(sqoop_replace(`couponid`),''),`coupon_type`,`coupon_amount`,`coupon_spend`,nvl(sqoop_replace(`coupon_source`),''),nvl(sqoop_replace(`expire_time`),''),nvl(sqoop_replace(`enable_time`),''),`currency`,`origin`,`logo`,`status`,`budgetid`,`batchid`,nvl(sqoop_replace(`batch_start`),''),nvl(sqoop_replace(`batch_name`),''),nvl(sqoop_replace(`orderid`),''),nvl(sqoop_replace(`billid`),''),`productid`,nvl(sqoop_replace(`product_name`),''),`cost`,nvl(sqoop_replace(`spend_time`),''),nvl(sqoop_replace(`orderenv`),''),nvl(sqoop_replace(`remark`),''),nvl(sqoop_replace(`reserved_a`),''),nvl(sqoop_replace(`reserved_b`),''),`reserved_i`,`reserved_j`,nvl(sqoop_replace(`reserved_t`),''),nvl(sqoop_replace(`a_create_time`),''),nvl(sqoop_replace(`a_modify_time`),''),`a_status`,nvl(sqoop_replace(`channel_get`),''),nvl(sqoop_replace(`bind_time`),''),nvl(sqoop_replace(`freeze_time`),''),nvl(sqoop_replace(`unfreeze_time`),''),nvl(sqoop_replace(`trade_no`),''),nvl(sqoop_replace(`other_info`),'')

  from
  (
  â€‹    select
  â€‹        *,
  â€‹        row_number() over(partition by system_rule_etl_uniq_key order by system_rule_etl_update_field desc) as rank
  â€‹    from gulfstream_ods.ods_binlog_c_coupon_rel_increment
  â€‹    where
  â€‹        concat(year,month,day,hour) between '2018090200' and '2018090223'
  â€‹        and ( a_create_time between '2018-09-02 00:00:00' and '2018-09-02 23:59:59' )
  â€‹        
  )a
  where 
  â€‹    rank = 1
  â€‹    and system_rule_etl_delete_flag = '0'

- rl vedio æœ‰å…³å®é™…æ“ä½œçš„ç‰‡æ®µï¼š

  Lecture 1: part-3

# To post

- èƒ½åšé…ç½®æ–‡ä»¶çš„å°½é‡åšåœ¨é…ç½®æ–‡ä»¶é‡Œï¼Œèƒ½è‡ªåŠ¨åŒ–çš„å°½é‡è‡ªåŠ¨åŒ–
- ![image-20180810115515916](../../../../var/folders/2w/tt1p_4td3yq9xlbl7c2t4jn00000gn/T/abnerworks.Typora/image-20180810115515916.png)





- ç‚¹å‡»æ¨¡å‹

  1. Random click model

  2. (1). Rank based ctr

     (2). Query-url

  3. Position based:

     Examination, actractivnesså…ˆæ£€æŸ¥åˆ°æ–‡æ¡£ï¼Œå…¶æ¬¡éœ€è¦å¯¹æ–‡æ¡£æ„Ÿå…´è¶£ï¼Œæ‰ä¼šç‚¹å‡»

  4. Cascade 

     å‡è®¾E0 = 1,ç¬¬ä¸€ä¸ªurlè‚¯å®šä¼šè¢«è§‚å¯Ÿ, P(E1=1|E0=0)=0

  5. DBN

     åœ¨cascadeåŸºç¡€ä¸Šï¼ŒåŠ ä¸Šæ»¡æ„åº¦ï¼Œç‚¹å‡»è¿‡åæœ‰ä¸€ä¸ªæ»¡æ„åº¦

- æ•´æ•°è§„åˆ’ï¼š

  1. A model without the integer variables may for example be solved in 0.1 seconds while the same model with some of the variables integer can take several minutes to solve.Â 
  2. å·¥ä½œä¸­ï¼Œæ•´æ•°è§„åˆ’å¼€å§‹æ˜¯å°æ•°åšå˜é‡å‰é¢çš„ç³»æ•°ï¼Œå¾ˆæ…¢ï¼Œè·‘ä¸å‡ºæ¥ï¼ŒæŠŠå°æ•°å››èˆäº”å…¥åˆ°æ•´æ•°åï¼Œå°±èƒ½è·‘å‡ºæ¥äº†ï¼Œå¤§çº¦åŠä¸ªå°æ—¶ã€‚
  3. æ•´æ•°è§„åˆ’æ˜¯å…ˆå»æ‰æ•´æ•°çº¦æŸï¼Œç”¨çº¿æ€§è§„åˆ’ï¼ˆæˆ–è€…éçº¿å½¢è§„åˆ’è§£å†³é—®é¢˜ï¼Œç„¶åå†ç”¨åˆ†æå®šç•Œæ³•ï¼ˆæˆ–å…¶ä»–æ–¹æ³•ï¼‰è§£å†³æ•´æ•°çº¦æŸã€‚çº¿å½¢è§„åˆ’ä¸€åŠç”¨å•çº¯å½¢æ³•è§£ï¼Œéçº¿å½¢è§„åˆ’ä¸€èˆ¬ä¸å®¹æ˜“è§£ï¼Œç”¨æšä¸¾æ³•å¤ªæ…¢ï¼Œä¸€èˆ¬ç”¨è’™ç‰¹å¡æ´›æ³•éšæœºå–æ ·å¯ä»¥è§£å†³ã€‚

- hive distinct:

  select distinct \* from table;

  select distinct col_1, col_2 as c2, col_3 from table;

  éƒ½å¯ä»¥ï¼Œç¬¬äºŒç§æ–¹æ³•ï¼Œé€‰æ‹©å‡ºæ¥çš„å­—æ®µåå°±æ˜¯col_1, c2, col_3

- linuxä¸‹æƒ³ç”¨8001ç«¯å£èµ·ä¸€ä¸ªDjangoï¼Œä½†æ˜¯è¯´ç«¯å£å ç”¨ï¼Œç”¨ps -ef | grep 8001æ‰¾ä¸å‡ºå ç”¨çš„è¿›ç¨‹ï¼Œè¿™æ—¶ç”¨lsof -i :8001å°±èƒ½çœ‹åˆ°è¿›ç¨‹äº†ã€‚lsof (list open file)ã€‚lsof -i :8001 çš„æ„æ€æ˜¯ï¼šåˆ—å‡ºè°åœ¨ä½¿ç”¨æŸä¸ªç«¯å£

- Probability calibration

  Demo code: https://www.cnblogs.com/lc1217/p/7069000.html

  æ¨¡å‹æ¦‚ç‡ä¸çœŸå®æ¦‚ç‡æœ‰åå·®çš„åŸå› ï¼š http://vividfree.github.io/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/2015/12/21/classifier-calibration-with-isotonic-regression

  éœ€è¦æ¦‚ç‡æ ¡å‡†çš„ä¾‹å­ï¼š http://vividfree.github.io/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/2015/12/21/classifier-calibration-with-isotonic-regression

  PAVä¾‹å­ï¼šhttp://xinsong.github.io/2014/03/27/probability_calibration/

- Xgb:

  Handle Imbalanced Dataset: https://xgboost.readthedocs.io/en/latest/tutorials/param_tuning.html

  For common cases such as ads clickthrough log, the dataset is extremely imbalanced. This can affect the training of XGBoost model, and there are two ways to improve it.

  - If you care only about the overall performance metric (AUC) of your prediction
    - Balance the positive and negative weights via `scale_pos_weight`
    - Use AUC for evaluation
  - If you care about predicting the right probability
    - In such a case, you cannot re-balance the dataset
    - Set parameter **`max_delta_step`** to a finite number (say 1) to help convergence

- **å»é™¤position bias**

  itemåœ¨å±•ç¤ºåˆ—è¡¨ä¸­çš„ä½ç½®ï¼Œå¯¹itemçš„ç‚¹å‡»æ¦‚ç‡å’Œä¸‹å•æ¦‚ç‡æ˜¯æœ‰éå¸¸å¤§å½±å“çš„ï¼Œæ’åè¶Šé å‰çš„itemï¼Œè¶Šå®¹æ˜“è¢«ç‚¹å‡»å’Œä¸‹å•ï¼Œè¿™å°±æ˜¯Position Biasçš„å«ä¹‰ã€‚

  åœ¨æŠ½å–ç‰¹å¾å’Œè®­ç»ƒæ¨¡å‹çš„æ—¶å€™ï¼Œå°±éœ€è¦å»é™¤è¿™ç§Position Biasã€‚å½“æ—¶æˆ‘ä»¬æ˜¯åœ¨ä¸¤ä¸ªåœ°æ–¹åšè¿™ç§å¤„ç†ï¼š

  1ï¼‰æ˜¯åœ¨è®¡ç®—itemçš„å†å²CTRï¼ˆi_CTR_realï¼‰çš„æ—¶å€™ï¼Œæ ¹æ®æŸç§å‡è®¾è¿›è¡Œå»é™¤position biasã€‚ä¸€ä¸ªå¸¸è§çš„å‡è®¾æ˜¯ï¼ŒæŠŠè¡¨ç°CTRï¼ˆi_CTRï¼‰çœ‹æˆæ˜¯çœŸå®CTR(i_CTR_real)å’Œä½ç½®æ•ˆåº”çš„ä¹˜ç§¯ï¼Œè€Œä½ç½®æ•ˆåº”ç”¨æ‰€æœ‰itemåœ¨æŸä¸ªä½ç½®pçš„CTRçš„å¹³å‡å€¼è¿›è¡Œè¡¨ç¤ºã€‚è¿™ç§è®¡ç®—æ–¹æ³•å¯ä»¥ç”¨å…¬å¼è¡¨ç¤ºã€‚

  2ï¼‰æ˜¯åœ¨äº§ç”Ÿè®­ç»ƒæ ·æœ¬çš„æ—¶å€™ï¼ŒæŠŠå±•ç¤ºä½ç½®ä½œä¸ºç‰¹å¾æ”¾åœ¨æ ·æœ¬é‡Œé¢ï¼Œå¹¶ä¸”åœ¨ä½¿ç”¨æ¨¡å‹çš„æ—¶å€™ï¼ŒæŠŠå±•ç¤ºä½ç½®ç‰¹å¾è®¾ç½®ä¸€ä¸ªç»Ÿä¸€ç½®çš„å€¼ï¼Œæ¯”å¦‚0ã€‚

- åˆ†äº«

  Diri Procession èšç±»é—®é¢˜

  ç‹„åˆ©å…‹é›·è¿‡ç¨‹å°±æ˜¯ç¦»æ•£å…ˆéªŒåˆ†å¸ƒçš„è¿‡ç¨‹

- è·ç¦»ï¼šæ¬§å¼è·ç¦»ã€ç¼–è¾‘è·ç¦»ã€ä½™å¼¦è·ç¦»ã€Jaccardè·ç¦»ç­‰æ¥è¿›è¡Œç›¸ä¼¼åº¦çš„åº¦é‡ï¼Œ

- ### Model-based[[edit](https://en.wikipedia.org/w/index.php?title=Collaborative_filtering&action=edit&section=5)]

  In this approach, models are developed using different [data mining](https://en.wikipedia.org/wiki/Data_mining), [machine learning](https://en.wikipedia.org/wiki/Machine_learning) algorithms to predict users' rating of unrated items. There are many model-based CF algorithms. [Bayesian networks](https://en.wikipedia.org/wiki/Bayesian_networks), [clustering models](https://en.wikipedia.org/wiki/Cluster_Analysis), [latent semantic models](https://en.wikipedia.org/wiki/Latent_Semantic_Indexing) such as [singular value decomposition](https://en.wikipedia.org/wiki/Singular_value_decomposition), [probabilistic latent semantic analysis](https://en.wikipedia.org/wiki/Probabilistic_latent_semantic_analysis), multiple multiplicative factor, [latent Dirichlet allocation](https://en.wikipedia.org/wiki/Latent_Dirichlet_allocation) and [Markov decision process](https://en.wikipedia.org/wiki/Markov_decision_process) based models.[[5\]](https://en.wikipedia.org/wiki/Collaborative_filtering#cite_note-Suetal2009-5)

- æè‡´è¿œ(æè‡´è¿œ)ğŸ’¬é‚®ç®±å‰ç¼€yannlizhiyuan12:00

  åœ¨çœŸå®ä¸‹å•æ•°æ®ä¸Šåšäº†ä¸€ç‰ˆç»å…¸ååŒè¿‡æ»¤ç®—æ³•å’Œä¹‹å‰[@ç‹çŠ‡ï¼ˆå¤–å–ç®—æ³•æ±‚è´¤ï¼‰ ](#) è€å¤§æè¿‡çš„embedding ååŒè¿‡æ»¤ç®—æ³•çš„ç¦»çº¿è¯„ä¼°æŠ¥å‘Š
  <http://wiki.intra.xiaojukeji.com/pages/viewpage.action?pageId=150283288>

  èƒ¡èª(èƒ¡èª)ğŸ’¬vincenthucong12:38

  åˆ†äº«å‡ ä¸ªä»¥å‰é‡åˆ°çš„ç‚¹ï¼Œ1. embeddindçš„æ–¹å¼æ¯”è¾ƒéœ€æ±‚æ•°æ®é‡ï¼Œä¼ ç»Ÿcfèƒ½å¾ˆå¿«å¾ˆå¥½çš„æ•æ‰é©±çƒ­çš„ååŒæ•ˆæœï¼Œ2.åœ¨cfæ•ˆæœå¾ˆå¥½çš„æƒ…å†µä¸‹ï¼Œembeddingå¯ä»¥åŠ å¼ºæ³›åï¼Œå¹¶ä¸”å¯ä»¥åœ¨ä¸€ä¸ªæ¨¡å‹é‡Œé¢åˆå¹¶å¤šç§è¡Œä¸ºæ•°æ®å’Œå±æ€§ä¿¡æ¯ï¼Œ3.ä¼ ç»Ÿcfç®—æ³•è®¡ç®—ä¼šå‡ºç°ç»„åˆçˆ†ç‚¸çš„æƒ…å†µï¼Œåœ¨è®¡ç®—ä¸Šä¼šå‡ºç°æ€§èƒ½é—®é¢˜ï¼Œè¿™ç§æƒ…å†µä¸‹ä¹Ÿéœ€è¦å„ç§embeddingç®—æ³•æ¥è§£å†³ã€‚

- D-ETA:

  è¡Œç¨‹ä¸­çš„4ä¸ªåˆ†æ®µï¼šåˆ°åº—ã€å–é¤ã€åˆ°æ¥¼ã€äº¤é¤ ï¼Œåˆ†åˆ«å»ºç«‹æœºå™¨å­¦ä¹ æ¨¡å‹ï¼Œä½¿ç”¨å„ç§ç‰¹å¾æ€»ç»“æ¨¡å¼ï¼Œä¸ªæ€§åŒ–ç²¾å‡†åŒ–é¢„ä¼°æ¯ä¸ªè®¢å•å‡†ç¡®çš„4æ®µæ—¶é—´ï¼Œæ›¿ä»£åŸæ¥çš„ç®€å•è§„åˆ™é˜ˆå€¼è®¡ç®—ETA